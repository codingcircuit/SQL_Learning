# 5. Transaction Control Language (TCL)

- Oracle server considers transactions for ensuring data consistency.
- A transaction is a set of one or more DML statements which Oracle treats as a single logical unit of work.
- A transaction groups SQL statements so that they are either all committed (applied to the database) or rolled back (undone from the database).
- All changes made by DML statements are made permanent and visible to other users only after committing the changes.
- DCL and DDL commands always force a commit and explicit committing is not required.

<br>  



## Transaction Start and End Scenarios

- A Transaction begins when the first executable SQL statement is encountered.
- The Transaction terminates when any of the following actions occur.
     - A COMMIT or ROLL BACK issued.
     - A DDL statement issued
     - A DCL statement issued
     - Normal shut down from database
     - Failure of machine or system crashes

## Explicit Transaction Control Statements
- COMMIT
- SAVEPOINT
- ROLLBACK

<br>  


#### COMMIT

- It ends the current Transaction by making all pending data changes permanent.
- Once committed, all users can view the recent changes.

<br>  


```sql
COMMIT;

```


<br>


#### SAVEPOINT

- SAVEPOINT is used to mark a point in the current transaction to which we
can later roll back.
- We can create multiple savepoints in a single transaction.
- Savepoints can be used to control the reve rting of changes.

<br>  


```sql
SAVEPOINT <NAME>;
``` 


<br>  


```sql
select * from department ;
```

![images/update-table-data-with-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/update-table-data-with-where.png?raw=true)

<br>  



```sql          
select * from department_copy ;
```
![images/update-table-data-without-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/update-table-data-without-where.png?raw=true)

<br>    

<br>  


#### ROLLBACK

- Delete statement is used to remove records from a table.
- A subset may be defined for deletion using WHERE condition; otherwise all records will be removed.

```sql
rem DELETE with WHERE condition
DELETE FROM department
WHERE DEPARTMENT_NAME = 'Single Row Update' ;

rem DELETE without WHERE condition
DELETE FROM department_copy ;
```

<br>  
<br>  

```sql
select * from department ;
```

![images/delete-table-data-with-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/delete-table-data-with-where.png?raw=true)

<br>  
<br> 



```sql          
select * from department_copy ;
```
![images/delete-table-data-without-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/delete-table-data-without-where.png?raw=true)
   

> [!NOTE]
> Without WHERE condition all the records will be deleted in the table. 


<br>  


