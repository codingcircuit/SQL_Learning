# 5. Transaction Control Language (TCL)

- Oracle server considers transactions for ensuring data consistency.
- A transaction is a set of one or more DML statements which Oracle treats as a single logical unit of work.
- A transaction groups SQL statements so that they are either all committed (applied to the database) or rolled back (undone from the database).
- All changes made by DML statements are made permanent and visible to other users only after committing the changes.
- DCL and DDL commands always force a commit and explicit committing is not required.

<br>  



## Transaction Start and End Scenarios

- A Transaction begins when the first executable SQL statement is encountered.
- The Transaction terminates when any of the following actions occur.
     - A COMMIT or ROLL BACK issued.
     - A DDL statement issued
     - A DCL statement issued
     - Normal shut down from database
     - Failure of machine or system crashes

## Explicit Transaction Control Statements
- COMMIT
- SAVEPOINT
- ROLLBACK

<br>  


#### COMMIT

- It ends the current Transaction by making all pending data changes permanent.
- Once committed, all users can view the recent changes.

<br>  


```sql
COMMIT;

```


<br>


#### SAVEPOINT

- SAVEPOINT is used to mark a point in the current transaction to which we
can later roll back.
- We can create multiple savepoints in a single transaction.
- Savepoints can be used to control the reve rting of changes.

<br>  


```sql
SAVEPOINT <NAME>;
``` 


<br>  


#### ROLLBACK

- Ends the current transaction by discarding all pending data changes.
- The data changes are undone.
- Restores the state of the database to the last commit point.
- The locks on the affected rows are automatically released.

```sql
rem 1. ROLLBACK general
ROLLBACK;    

rem 2. ROLLBACK to SavePoint  
ROLLBACK to <SAVEPOINT NAME>;
```

<br>  
<br>  

```sql
select * from department ;
```

![images/delete-table-data-with-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/delete-table-data-with-where.png?raw=true)

<br>  
<br> 



```sql          
select * from department_copy ;
```
![images/delete-table-data-without-where.png](https://github.com/venkatdurgempudi/SQL/blob/main/sql-basics/images/delete-table-data-without-where.png?raw=true)
   

> [!NOTE]
> Without WHERE condition all the records will be deleted in the table. 


<br>  


